<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Videy Premium</title>
    
    <!-- === LOGO CONFIGURATION === -->
    <link rel="icon" href="https://i.ibb.co.com/SpVMhDf/Picsart-25-12-18-16-27-03-730-2.jpg" sizes="32x32" type="image/jpeg">
    <link rel="apple-touch-icon" href="https://i.ibb.co.com/SpVMhDf/Picsart-25-12-18-16-27-03-730-2.jpg">
    
    <meta property="og:type" content="Streaming" />
    <meta property="og:title" content="Premium" />
    <meta property="og:description" content="Link videy premium." />
    <meta property="og:image" content="https://i.ibb.co.com/SpVMhDf/Picsart-25-12-18-16-27-03-730-2.jpg" />
    
    <!-- LIBRARY -->
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root { --plyr-color-main: #2563eb; }
        .plyr { border-radius: 12px; overflow: hidden; width: 100%; height: 100%; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #0f172a;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 0; 
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode { background-color: #050505; color: #e5e5e5; }
        body.dark-mode .verify-card { background-color: #121212; border-color: #262626; box-shadow: 0 4px 20px -1px rgba(0, 0, 0, 0.9); }
        body.dark-mode h2 { color: #ffffff; }
        body.dark-mode .text-gray-500 { color: #a3a3a3; }
        body.dark-mode .code-display { background-color: #1f1f1f; color: #ffffff; border: 1px solid #333; }
        body.dark-mode input[type="tel"] { background-color: #0a0a0a; border-color: #404040; color: #fff; }
        body.dark-mode .btn-verify { background-color: #ffffff; color: #000000; }
        body.dark-mode .contact-link { background-color: #121212; border-color: #333; color: #d4d4d4; }
        body.dark-mode .device-badge { background: #2b0b0b; border-color: #450a0a; }

        /* WRAPPER */
        #content-wrapper {
            width: 95%; max-width: 854px;
            display: none; 
            flex-direction: column;
            align-items: center;
            z-index: 10;
            padding-bottom: 50px;
            margin-top: 10px;
        }

        /* PLAYER CONTAINER */
        .player-container {
            width: 100%; aspect-ratio: 16 / 9;
            background: #000; border-radius: 12px; 
            overflow: hidden; position: relative; 
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            z-index: 20;
        }
        
        iframe { width: 100% !important; height: 100% !important; border: none !important; display: block !important; }
        #native-player-wrapper { width: 100%; height: 100%; display: none; }
        video { width: 100%; height: 100%; object-fit: contain; }

        /* OVERLAY LOCKER */
        #ad-overlay-locker {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.98); 
            display: flex; align-items: center; justify-content: center;
            z-index: 50; padding: 10px; 
            transition: opacity 0.5s ease;
        }

        .locker-content { width: 100%; max-width: 420px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .icon-circle { width: 50px; height: 50px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; }
        .icon-circle svg { width: 24px; height: 24px; color: #fff; }
        .locker-title { font-size: 16px; font-weight: 700; color: white; margin-bottom: 4px; }
        .locker-desc { font-size: 12px; color: #94a3b8; line-height: 1.4; margin-bottom: 16px; max-width: 95%; }
        
        .btn-unlock {
            background: #fff; color: #0f172a; border: none; padding: 10px 24px;
            border-radius: 8px; font-weight: 700; font-size: 13px; cursor: pointer; 
            display: flex; align-items: center; justify-content: center; gap: 8px;
            min-width: 200px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .btn-unlock:disabled { background: #334155; color: #94a3b8; cursor: not-allowed; }

        /* OVERLAY ADBLOCK DETECTED */
        #adblock-warning {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0f172a; 
            z-index: 99999; 
            display: none; 
            flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 20px;
        }
        .ab-icon { width: 80px; height: 80px; margin-bottom: 20px; color: #ef4444; }
        .ab-title { font-size: 24px; font-weight: 800; color: white; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .ab-desc { font-size: 14px; color: #cbd5e1; max-width: 400px; margin-bottom: 30px; line-height: 1.6; }
        .btn-refresh {
            background: #ef4444; color: white; padding: 12px 30px; border-radius: 50px;
            font-weight: 700; border: none; cursor: pointer; box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
            transition: transform 0.2s;
        }
        .btn-refresh:active { transform: scale(0.95); }

        /* TOMBOL THEME */
        #theme-btn-player {
            position: absolute;
            top: 10px; right: 10px;
            z-index: 60; 
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(4px);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.1);
            width: 32px; height: 32px;
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        #theme-btn-player:hover { background: rgba(255, 255, 255, 0.3); }

        #device-msg { transition: all 0.5s ease; width: 100%; display: flex; justify-content: center; margin-bottom: 15px; }
        .device-badge { 
            background: #fef2f2; border: 1px solid #fecaca; border-radius: 10px; 
            padding: 8px 20px; 
            display: inline-flex; flex-direction: column; 
            align-items: center; justify-content: center; text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
            max-width: 90%; width: auto;
        }

        .status-box { margin-top: 12px; padding: 6px 12px; border-radius: 6px; font-size: 11px; font-weight: 600; display: inline-flex; align-items: center; gap: 6px; opacity: 0; transition: all 0.3s; }
        .status-waiting { background: rgba(251, 191, 36, 0.1); color: #fbbf24; border: 1px solid rgba(251, 191, 36, 0.2); }
        .status-fail { background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.2); }
        .status-success { background: rgba(34, 197, 94, 0.1); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.2); }

        .clean-on-play { transition: opacity 0.5s ease; }

        #dl-container { width: 100%; margin-top: 15px; display: none; }
        .btn-download-primary { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; background: #2563eb; color: white; padding: 14px; border-radius: 12px; font-weight: 600; text-decoration: none; box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.2); }

        /* PERBAIKAN TOMBOL LAPOR / WHATSAPP */
        .contact-link { 
            margin-top: 12px; width: 100%; 
            font-size: 13px; color: #0f172a; 
            background: #f1f5f9; padding: 12px; 
            border-radius: 12px; border: 1px solid #cbd5e1; 
            display: flex; flex-direction: row; /* Pastikan baris */
            align-items: center; justify-content: center; 
            gap: 10px; text-decoration: none; 
            transition: all 0.3s ease; font-weight: 600; 
        }

        #native-ad-wrapper { margin-top: 20px; width: 100%; background: #fff; border-radius: 12px; border: 1px solid #e2e8f0; padding: 12px; display: flex; justify-content: center; align-items: center; min-height: 120px; transition: all 0.5s ease; }

        .verify-card { position: relative; background: #ffffff; padding: 32px; border-radius: 20px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); border: 1px solid #e2e8f0; width: 90%; max-width: 400px; text-align: center; z-index: 100; margin-bottom: 30px; margin-top: 40px; transition: background-color 0.3s, border-color 0.3s; }
        .code-display { font-size: 32px; font-weight: 700; letter-spacing: 6px; margin: 20px 0; padding: 12px; background: #f1f5f9; border-radius: 12px; }
        input[type="tel"] { width: 100%; padding: 14px; border-radius: 10px; border: 1px solid #cbd5e1; text-align: center; font-size: 18px; margin-bottom: 16px; outline: none; }
        .btn-verify { width: 100%; background: #0f172a; color: #fff; padding: 14px; border-radius: 10px; font-weight: 600; cursor: pointer; border: none; transition: all 0.3s; }
        #error-msg { color: #dc2626; font-size: 14px; margin-top: -10px; margin-bottom: 10px; font-weight: 600; display: none; }
        
        @keyframes shake { 0%, 100% { transform: translateX(0); } 20%, 60% { transform: translateX(-6px); } 40%, 80% { transform: translateX(6px); } }
        .shake-anim { animation: shake 0.4s ease-in-out; }
    </style>
</head>
<body data-version="v17.0-FIXED-DESIGN-ADBLOCK">

    <!-- OVERLAY WARNING ADBLOCK -->
    <div id="adblock-warning">
        <svg class="ab-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <div class="ab-title">AdBlock Terdeteksi</div>
        <p class="ab-desc">
            Sistem kami mendeteksi Pemblokir Iklan aktif.<br>
            Server kami gratis karena iklan. Mohon matikan AdBlock Anda untuk melanjutkan.
        </p>
        <button class="btn-refresh" onclick="location.reload()">SAYA SUDAH MATIKAN</button>
    </div>

    <!-- IKLAN ATAS -->
    <div id="social-bar-wrapper" class="clean-on-play">
        <script type='text/javascript' src='//commonwealthgroovemadam.com/d8/73/50/d87350f60caa61205cfd0d5c55df9e33.js'></script>
    </div>

    <!-- KARTU VERIFIKASI -->
    <div id="verify-screen" class="verify-card">
        <h2 class="text-xl font-bold text-gray-900 mb-1">Verifikasi</h2>
        <p class="text-gray-500 text-xs mb-4">Masukkan kode akses video.</p>
        <p id="error-msg">Kode salah!</p>
        <div class="code-display" id="display-code">----</div>
        <input type="tel" id="user-input" placeholder="____" maxlength="4">
        <button onclick="checkCode()" class="btn-verify">Konfirmasi</button>
    </div>

    <div id="content-wrapper">
        
        <!-- INFO BADGE -->
        <div id="device-msg" class="clean-on-play hidden">
            <div class="device-badge">
                <p class="text-[10px] text-red-600 uppercase tracking-wider font-bold mb-1 flex items-center justify-center gap-1">
                    <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    INFORMASI
                </p>
                <p class="text-xs text-gray-600 leading-snug">
                    Video mungkin sudah di kompres agar admin ga boros kuota. <br>
                    <b>Tips HD:</b> Jangan gunakan layar penuh (Fullscreen).
                </p>
            </div>
        </div>
        
        <div class="player-container">
            <!-- TOMBOL THEME -->
            <button id="theme-btn-player" onclick="toggleTheme()" title="Ganti Mode">
                <svg id="icon-moon" style="width:18px;height:18px;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                <svg id="icon-sun" style="width:18px;height:18px;display:none;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            </button>

            <!-- OVERLAY LOCKER -->
            <div id="ad-overlay-locker">
                <div class="locker-content">
                    <div class="icon-circle">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                    </div>
                    <div class="locker-title">Konten Terkunci</div>
                    <div class="locker-desc">
                        Klik tombol di bawah dan tetap berada di halaman sponsor selama <b>8 detik</b> untuk membuka akses.
                    </div>
                    <button class="btn-unlock" onclick="startSmartUnlock()">
                        <span>BUKA AKSES (8s)</span>
                    </button>
                    <div id="status-box" class="status-box"></div>
                </div>
            </div>

            <div id="embed-mount" style="width:100%; height:100%;"></div>

            <div id="native-player-wrapper">
                <video id="player" playsinline controls>
                    <source src="" type="" />
                </video>
            </div>
        </div>

        <div id="clean-ui-area" class="clean-on-play w-full flex flex-col items-center">
            
            <div id="dl-container">
                <a href="#" id="dl-link" target="_blank" class="btn-download-primary">
                    <svg style="width:20px;height:20px" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    <span>Download Video Ini</span>
                </a>
            </div>

            <!-- PERBAIKAN: UKURAN SVG DIKUNCI DI SINI -->
            <a href="https://wa.me/6285126450524" target="_blank" class="contact-link">
                <svg style="width:24px; height:24px; min-width:24px;" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01A9.816 9.816 0 0012.04 2zM12.05 20.21c-1.5 0-2.97-.39-4.27-1.14l-.3-.18-3.14.83.84-3.07-.19-.31a8.12 8.12 0 01-1.25-4.42c0-4.48 3.64-8.13 8.12-8.13 2.17 0 4.21.85 5.75 2.38 1.53 1.54 2.38 3.58 2.38 5.75 0 4.48-3.64 8.13-8.12 8.13zm4.44-6.08c-.24-.12-1.44-.71-1.66-.79-.22-.08-.39-.12-.54.12-.16.24-.61.77-.75.93-.14.16-.28.18-.52.06-.24-.12-1.02-.38-1.95-1.21-.72-.65-1.21-1.45-1.35-1.69-.14-.24-.02-.37.1-.49.11-.11.24-.28.36-.42.12-.14.16-.24.24-.4.08-.16.04-.3-.02-.42-.06-.12-.54-1.3-.74-1.78-.2-.46-.4-.4-.54-.4h-.46c-.16 0-.42.06-.64.3-.22.24-.85.83-.85 2.02s.87 2.34.99 2.5c.12.16 1.71 2.61 4.15 3.66 1.62.7 2.24.75 3.04.63.89-.13 2.11-.86 2.41-1.69.29-.83.29-1.54.2-1.69-.08-.15-.29-.24-.53-.36z"/></svg>
                <span>Lapor Masalah / Request Video</span>
            </a>

            <div id="native-ad-wrapper">
                <script async="async" data-cfasync="false" src="https://commonwealthgroovemadam.com/2259c8961aeea898328fa2ef52a93ed9/invoke.js"></script>
                <div id="container-2259c8961aeea898328fa2ef52a93ed9"></div>
            </div>

        </div>
    </div>

    <script>
        // --- 1. SUPER AGGRESSIVE ADBLOCK DETECTOR (NETWORK CHECK) ---
        async function checkAdBlocker() {
            let adBlockEnabled = false;

            // Metode 1: Fetch Network Check (Cek apakah link iklan diblokir jaringan)
            // Menggunakan URL umum Google Ads atau URL iklan kamu sendiri
            const testUrl = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';
            
            try {
                // Request 'HEAD' biar ringan, mode 'no-cors' agar tidak error CORS (kita cuma butuh tau gagal/berhasil)
                await fetch(testUrl, { method: 'HEAD', mode: 'no-cors' });
            } catch (e) {
                // Jika error network, kemungkinan besar diblokir oleh AdBlock/DNS Filter
                adBlockEnabled = true;
            }

            // Metode 2: Cek Elemen Pancingan (Backup)
            if (!adBlockEnabled) {
                let bait = document.createElement('div');
                bait.innerHTML = '&nbsp;';
                bait.className = 'adsbox ad-banner';
                bait.style.position = 'absolute'; bait.style.top = '-1000px'; bait.style.left = '-1000px'; bait.style.height = '1px';
                document.body.appendChild(bait);
                window.setTimeout(function() {
                    if (bait.offsetHeight === 0 || window.getComputedStyle(bait).display === 'none') {
                        showAdBlockWarning();
                    }
                    bait.remove();
                }, 100);
            } else {
                showAdBlockWarning();
            }
        }

        function showAdBlockWarning() {
            document.getElementById('adblock-warning').style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Kunci scroll
        }

        window.onload = function() {
            checkAdBlocker();
        };
        // ----------------------------------

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            document.getElementById('icon-sun').style.display = isDark ? 'block' : 'none';
            document.getElementById('icon-moon').style.display = isDark ? 'none' : 'block';
        }

        const adList = [
            "https://commonwealthgroovemadam.com/h0jp3aw52?key=f4ae7ff4a14122eddb7148a86cfa976b", 
            "https://otieu.com/4/10379232" 
        ];

        let currentAdIndex = Math.floor(Math.random() * adList.length);
        const REQUIRED_DURATION = 8; 

        const playerBases = {
            h: 'https://short.icu/', s: 'https://gradehgplus.com/e/', v: 'https://vidhidepre.com/v/',
            t: 'https://emturbovid.com/t/', d: 'https://dood.li/e/', o: 'https://voe.sx/e/',
            f: 'https://filemoon.sx/e/', st: 'https://streamtape.com/e/', md: 'https://mixdrop.co/e/',
            id: 'https://cdn.videy.co/', vip: 'https://bytt.jb-aiwei.cc/contents/videos/',
            tv: 'https://stream.kingbokep.video/', rs: 'https://t33.cdn2020.com/video/m3u8/'
        };

        let correctCode = Math.floor(1000 + Math.random() * 9000);
        document.getElementById('display-code').innerText = correctCode;

        let targetVideoUrl = "";
        let isNativeMode = false;
        let mimeType = "";

        (function initVideoLogic() {
            const params = new URLSearchParams(window.location.search);
            const dlContainer = document.getElementById('dl-container');
            const dlLink = document.getElementById('dl-link');

            if (params.has('dl')) {
                dlLink.href = params.get('dl');
                dlContainer.style.display = 'block';
            }

            for (let key in playerBases) {
                if (params.has(key)) {
                    if (key === 'id') { isNativeMode = true; targetVideoUrl = playerBases[key] + params.get(key); mimeType = 'video/mp4'; }
                    else if (key === 'vip' || key === 'rs') { isNativeMode = true; targetVideoUrl = playerBases[key] + params.get(key) + '/index.m3u8'; mimeType = 'application/x-mpegURL'; }
                    else if (key === 'tv') { isNativeMode = true; targetVideoUrl = playerBases[key] + params.get(key) + '/playlist.m3u8'; mimeType = 'application/x-mpegURL'; }
                    else {
                        isNativeMode = false; targetVideoUrl = playerBases[key] + params.get(key);
                        if (key === 'g') targetVideoUrl += '/preview';
                        if (key === 'vz' || key === 'up') targetVideoUrl += '.html';
                        if (key === 'db') targetVideoUrl += '?raw=1';
                    }
                    break;
                }
            }
        })();

        function loadPlayerBackground() {
            if (isNativeMode) {
                document.getElementById('embed-mount').style.display = 'none';
                document.getElementById('native-player-wrapper').style.display = 'block';
                const video = document.getElementById('player');
                if (mimeType === 'application/x-mpegURL') {
                    if (Hls.isSupported()) {
                        const hls = new Hls(); hls.loadSource(targetVideoUrl); hls.attachMedia(video);
                        hls.on(Hls.Events.MANIFEST_PARSED, function() { initPlyr(video); });
                    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                        video.src = targetVideoUrl; initPlyr(video);
                    }
                } else { video.src = targetVideoUrl; initPlyr(video); }
            } else {
                const mount = document.getElementById('embed-mount');
                if (targetVideoUrl) { mount.innerHTML = `<iframe src="${targetVideoUrl}" allowfullscreen allow="autoplay" scrolling="no"></iframe>`; }
            }
        }

        function initPlyr(element) {
            const player = new Plyr(element, {
                controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'settings', 'pip', 'fullscreen'],
                autoplay: false 
            });

            if ('mediaSession' in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: document.title,
                    artist: 'Videy Premium',
                    album: 'Premium Player',
                    artwork: [
                        { src: 'https://i.ibb.co.com/SpVMhDf/Picsart-25-12-18-16-27-03-730-2.jpg', sizes: '512x512', type: 'image/jpeg' },
                    ]
                });
            }

            const themeBtn = document.getElementById('theme-btn-player');
            player.on('play', () => { 
                if(themeBtn && themeBtn.style.display !== 'none') themeBtn.style.display = 'none'; 
            });
            player.on('pause', () => { 
                if(themeBtn && themeBtn.style.display !== 'none') themeBtn.style.display = 'flex'; 
            });

            element.pause();
        }

        function killSocialBar() {
            const socialAd = document.getElementById('social-bar-wrapper');
            if(socialAd) socialAd.remove();
        }

        let adClickTime = 0;
        let isProcessRunning = false;
        let isUnlocked = false;
        let visualInterval = null;

        function startSmartUnlock() {
            if(isUnlocked) return;
            window.open(adList[currentAdIndex], '_blank');
            adClickTime = Date.now();
            isProcessRunning = true;
            
            const btn = document.querySelector('.btn-unlock');
            const statusBox = document.getElementById('status-box');
            
            statusBox.style.opacity = '1';
            statusBox.className = "status-box status-waiting";
            statusBox.innerHTML = `<svg class="animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span>JANGAN TUTUP IKLAN...</span>`;

            let timeLeft = REQUIRED_DURATION;
            btn.disabled = true; 
            if(visualInterval) clearInterval(visualInterval);

            visualInterval = setInterval(() => {
                if(!isProcessRunning) { clearInterval(visualInterval); return; }
                const isSplitScreen = (window.innerHeight < (window.screen.height * 0.65));
                if (!document.hidden || isSplitScreen) {
                    adClickTime = Date.now(); timeLeft = REQUIRED_DURATION; 
                    if(isSplitScreen) { btn.innerHTML = `<span>GUNAKAN CHROME!</span>`; btn.style.color = "#ef4444"; }
                    else { btn.innerHTML = `<span>TUNGGU DI TAB IKLAN...</span>`; btn.style.color = "#0f172a"; }
                } else {
                    timeLeft--; btn.style.color = "#0f172a";
                    if(timeLeft > 0) { btn.innerHTML = `<span>MEMERIKSA... (${timeLeft})</span>`; }
                    else { btn.innerHTML = `<span>SILAKAN KEMBALI</span>`; }
                }
            }, 1000);
        }

        window.onpageshow = function(event) {
            if (isProcessRunning && !isUnlocked) {
                const diffSeconds = Math.floor((Date.now() - adClickTime) / 1000);
                if (diffSeconds >= (REQUIRED_DURATION - 1)) { handleUserReturn(); return; }
            }
            if (event.persisted && isProcessRunning && !isUnlocked) { handleFailState("back_button"); }
        };

        function handleUserReturn() {
            if (document.hidden && !isUnlocked) return;
            const isSplitScreen = (window.innerHeight < (window.screen.height * 0.65));
            if (isSplitScreen && isProcessRunning) { document.querySelector('.btn-unlock').innerHTML = `<span>GANTI KE CHROME!</span>`; return; }

            if (isProcessRunning && !isUnlocked) {
                const diffSeconds = Math.floor((Date.now() - adClickTime) / 1000);
                if (diffSeconds >= (REQUIRED_DURATION - 1)) {
                    isUnlocked = true; isProcessRunning = false; clearInterval(visualInterval);
                    document.getElementById('status-box').className = "status-box status-success"; 
                    document.getElementById('status-box').innerHTML = `<span>Terbuka!</span>`;
                    
                    const overlay = document.getElementById('ad-overlay-locker');
                    overlay.style.opacity = '0';
                    setTimeout(() => { overlay.style.display = 'none'; }, 500);

                    // MODE BERSIH TOTAL
                    const themeBtn = document.getElementById('theme-btn-player');
                    if(themeBtn) themeBtn.remove(); 

                    const cleanArea = document.getElementById('clean-ui-area');
                    cleanArea.style.opacity = '0'; setTimeout(() => { cleanArea.style.display = 'none'; }, 500);
                    const infoBadge = document.getElementById('device-msg');
                    infoBadge.style.opacity = '0'; setTimeout(() => { infoBadge.style.display = 'none'; }, 500);
                    const topAd = document.getElementById('social-bar-wrapper');
                    if(topAd) { topAd.style.opacity = '0'; setTimeout(() => { topAd.remove(); }, 500); }

                } else {
                    handleFailState("too_fast");
                }
            }
        }

        function handleFailState(reason) {
            isProcessRunning = false; clearInterval(visualInterval); adClickTime = 0;
            const btn = document.querySelector('.btn-unlock');
            const statusBox = document.getElementById('status-box');

            currentAdIndex = (currentAdIndex === 0) ? 1 : 0;

            statusBox.className = "status-box status-fail"; 
            if(reason === "back_button") statusBox.innerHTML = `<span>Terdeteksi tombol Kembali!</span>`;
            else statusBox.innerHTML = `<span>Gagal! Kamu kembali terlalu cepat.</span>`;
            
            btn.disabled = false; btn.style.background = "#ef4444"; btn.style.color = "white";
            btn.innerHTML = `<span>ULANGI (8s)</span>`;
            document.querySelector('.locker-content').classList.add('shake-anim');
            setTimeout(() => document.querySelector('.locker-content').classList.remove('shake-anim'), 500);
        }

        document.addEventListener("visibilitychange", handleUserReturn);
        window.addEventListener("focus", handleUserReturn);

        function checkCode() {
            const val = document.getElementById('user-input').value;
            if (val == correctCode) {
                killSocialBar();
                document.getElementById('verify-screen').style.display = 'none';
                document.getElementById('content-wrapper').style.display = 'flex';
                document.getElementById('device-msg').classList.remove('hidden');
                loadPlayerBackground();
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        }
    </script>
</body>
</html>
